<script type="text/javascript">
  RED.nodes.registerType('whatsapp-bot', {
    category: 'Whatsapp Bot',
    color: '#25D366',
    defaults: {
      name: {
        value: ''
      },
      client: {
        type: 'whatsapp-client',
        required: true
      },
    },
    inputs: 1,
    outputs: 1,
    align: "left",
    icon: 'whatsapp.png',
    paletteLabel: 'Whatsapp Bot',
    label: function () {
      return this.name || 'Whatsapp Bot'
    }
  })
</script>


<script type="text/html" data-template-name="whatsapp-bot">
  <div class="form-row">
    <label for="node-input-client"><i class="icon-globe"></i> <span> Client</span></label>
    <input type="text" id="node-input-client">
  </div>
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>
</script>

<script type="text/x-red" data-help-name="whatsapp-bot">
  <p>Used to send/receive data from a Whatsapp Client. Each Bot node by default subscribes to 'onMessage' 'onAck' and 'onAddedToGroup' events</p>
  
  <h3>Input</h3>
  <ol class="node-ports">
     <li>Input
      <dl class="message-properties">
        <dt>topic <span class="property-type">String</span></dt>
        <dd>API/Event name</dd>
    </dl>
         <dl class="message-properties">
             <dt>payload <span class="property-type">Array</span></dt>
             <dd>Args to use to call the API</dd>
         </dl>
     </li>
  </ol>

  <p>Function node code example for:</p>
     <code>
        msg.payload = { topic: 'sendMessageToId', payload: [ 'xxxxxxxxxxxx@c.us', 'Hello from Node-Red'] }
        return msg
     </code>

  <p>Result:</p>
  <code>
    { topic: 'sendMessageToId', payload: [ true ], origin: { //the origin message request } }
 </code>

 <p>Example output for an <code>onMessage</code> event</p>
 <code>
  { topic: 'onMessage', payload: [ { // the message object } ] }
 </code>
  
  <h3>Outputs</h3>
  <ol class="node-ports">
     <li>Output
         <dl class="message-properties">
             <dt>payload <span class="property-type">Array</span></dt>
             <dd>Args result of the api/event</dd>
         </dl>
         <dl class="message-properties">
             <dt>topic <span class="property-type">String</span></dt>
             <dd>API name</dd>
         </dl>
     </li>
  </ol>
  
  <h3>References</h3>
    <ul>
        <li><a href="https://github.com/danielcardeenas/sulla">APIs</a> - List of available apis</li>
        <li><a href="https://github.com/robertsLando/node-red-contrib-whatsappbot">GitHub</a> - the node github repository</li>
    </ul>
  
  </script>